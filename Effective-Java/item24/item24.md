## 멤버 클래스는 되도록 static으로 만들라

### 중첩 클래스
중첩 클래스란 다른 클래스 안에 정의된 클래스를 말한다. 중첩 클래스는 포함된 클래스에서만 사용되어야 하고 외부에 쓰임새가 있다면 톱레벨 클래스로 만들어야 한다.

> 중첩 클래스 종류는 정적 멤버 클래스, 멤버 클래스, 익명 클래스, 지역 클래스 총 네 가지가 있다.

### 외부 클래스
```ad-info
외부 클래스는 내부 클래스가 선언이 된 클래스이다.
```

#### 정적 멤버 클래스
정적 멤버 클래슨느 다른 클래스 안에 선언되고 바깥 클래스의 private 멤버에도 접근할 수 있다는 점만 제외하고는 일반 클래스와 같다.

정적 멤버 클래스는 바깥 클래스와 함께 쓰일 때만 유용한 public 도우미 클래스로 사용하게ㅗ 된다. 

```ad-info
Operation은 Calculator 클래스의 정적 멤버 클래스가 되면서 Calculator.Operation.PLUS와 같은 형태로 연산을 참조할 수 있게 된다.
```

##### 정적 멤버 클래스와 (비정적) 멤버 클래스의 차이
구문상의 차이는 static이 붙고 안붙고의 차이지만 바깥 클래스의 인스턴스와 연결되는지의 여부가 달라진다. 만약 개념상 중첩 클래스의 인스턴스가 바깥 인스턴스와 독립적으로 존재한다면 정적 멤버 클래스로 생성해야 한다.(비정적 멤버 클래스는 바깥의 인스턴스 없이는 생성할 수 없다.)


### 내부 클래스
```ad-info
내부 클래스는 클래스 내부에 선언된다는 것 외에는 일반 클래스와 다를게 없다.
```


#### (비정적) 멤버 클래스
##### 비정적 멤버 클래스
비정적 멤버 클래스의 인스턴스와 바깥 인스턴스 사이 관계는 멤버 클래스가 인스턴스화 될 때 확립이 되고 변경될 수 없다. 바깥 클래스 인스턴스의 메서드에서 자동으로 만들어지기도 하지만 직접 호출 해 수동으로 만드는 경우도 있다.

```ad-note
바깥 클래스의 인스턴스와 비정적 멤버 클래스 인스턴스의 관계 정보는 비정적 멤버 클래스의 인스턴스 안에 만들어져 메모리 공간을 차지하며 생성 시간도 더 오래 걸린다.
```

##### 비정적 멤버 클래스가 사용되는 곳
비정적 멤버 클래스는 어댑터를 정의할 때 자주 사용된다. Map 인터페이스의 구현체들은 자신의 컬렉션 뷰를 구현할 때 비정적 멤버 클래스를 사용한다.

##### 비정적 멤버 클래스 보다는 정적 멤버 클래스
멤버 클래스에서 바깥 인스턴스에 접근할 일이 없다면 무조건 static을 붙여 정적 멤버 클래스로 만들어야 한다. static을 생략하게 되면 바깥 인스턴스로의 숨은 외부 참조를 갖게 된다. 이 참조를 저장하려면 시간과 공간이 소비되고, 가비지 컬렉션이 바깥 클래스의 인스턴스를 수거하지 못하는 경우가 발생할 수 있다.

#### 익명 클래스
멤버 클래스와 달리 사용되는 시점에 선언과 동시에 인스턴스가 만들어진다. 그리고 비정적인 문맥에서 사용되는 경우만 바깥 클래스의 인스턴스를 참조할 수 있다. 

```ad-note
익명클래스는 정적 팩터리 메서드를 구현할 때 사용된다.
```

##### 익명 클래스의 제약
선언한 지점에서만 인스턴스를 만들 수 있고, instanceof 검사나 클래스 이름이 필요한 작업을 수행할 수 없다. 

##### 익명 클래스와 람다
자바가 람다를 지원하고 나서는 익명 클래스가 아닌 람다를 사용하게 된다.

#### 지역 클래스
지역 클래스는 클래스는 가장 드물게 사용된다. 메서드 블록 안에 정의된 클래스는 지역 클래스라고 볼 수 있다.


### 핵심 정리
중첩 클래스에는 네 가지가 있으며, 각 쓰임이 다르다. 메서드 밖에서도 사용해야 하거나 메서드 안에 정의하기엔 너무 길다면 멤버 클래스로, 바깐 인스턴스를 참조한다면 비정적으로 멤버 클래스로 만든다. 중첩 클래스가 한 메서드 안에서 쓰이면서 동시에 한 번만 사용한다면 익명 클래스(람다)로 그렇지 않다면 지역 클래스로 만든다.