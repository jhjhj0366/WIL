
소프트웨어를 개발할 때 다양한 형태의 식별자가 필요하다. 데이터를 식별하기 위해서 필요한데, 이런 식별자를 만들 때 가장 범용적으로 사용하는 범용 고유 식별(UUID)자가 있다.

#### 범용 고유 식별자란
컴퓨터 시스템 내 고유한 객체를 식별하기 위해 사용하는 값이다.

#### UUID 구조
- UUID는 하이픈(`-`) 4개와 16진수 32개로 구성되어 있다.
- 구조는 8개-4개-4개-4개-12개 구조를 반드시 유지해야 한다.

> UUID는 32개 16 진수 모두 무작위로 만들기 때문에 같은 UUID를 만들 가능성이 낮다.


#### UUID 버전
UUID는 버전별로 사용 방법과 규칙이 다르다.
- UUID 버전 1과 UUID 버전 2
    - UUID 버전 1
        - 컴퓨터의 맥 주소와 타임스탬프 값을 기반으로 UUID를 생성했다.
    - UUID 버전 2
        - 규모가 큰 시스템 환경을 고려해 자릿수 일부를 지역별 정의(site-defined)로 남겼다.
    - 맥 주소가 달라고 같은 서버로 인식되어야 하는 경우도 많고, 맥 주소가 같아도 다른 서버로 익식해야 하는 경우가 많기 때문에 이러한 값으로 서버를 식별하는 데 한계가 있다.
- UUID 버전 3과 UUID 버전 5
    - UUID 버전 3
        - MD5를 사용한다.
    - UUID 버전 5
        - SHA-1를 사용한다.
    - MD5는 취약점이 발생한 이 후 사용하지 않지만 시스템 내부에서 고유한 데이터를 식별하는데 문제 없다.
- UUID 버전 4
    - 오늘날 가장 많이 사용하는 버전이다.
    - 버전을 표기한 4 비트를 제외한 나머지 122 비트를 모두 무작위로 생성한다.

#### 실사용 예 1 - 작업 식별자

UUID를 활용해 논리적인 작업의 고유 식별자로 활용할 수 있다. 복잡한 작업을 추적하기 위해 고유한 ID가 필요한데, 충돌 확률이 낮고, 고유 식별자로 사용할 수 있는 UUID를 사용하는 게 좋다.

> 웹 서비스를 만들 때 동시에 여러 웹 서버가 작업 ID를 생성하므로 UUID 충돌이 잦을 수 있다. 이 때 충돌을 막기 위해 ETCD, Redis와 같은 서비스를 이용해 먼저 UUID 생성한 쪽만 사용할 수 있도록 구성한다.

#### 실사용 예 2 - 고정된 값을 포함한 UUID

UUID 값 충돌 가능성이 낮은 점을 활용해 UUID 앞 8 자리를 타임스탬프로 변경해서 데이터 관리를 용이하게 만들 수 있다. 하지만 고정된 값을 사용해 충돌 시 발생할 문제에 대해 검토할 필요가 있다.

> 충돌이 발생했을 때 UUID를 다시 생성하거나 충돌해도 문제가 없는 해시 기반 자료구조를 사용하는 것도 방법이다.

#### 마치며

- 장점
    - UUID는 충돌 가능성이 낮아 범용적인 고유 식별자로 사용하기 좋다.
- 단점
    - 16 바이트나 필요해 용량을 많이 차지하게 된다.
    - UUID만으로 정보를 식별하기 어렵다.

