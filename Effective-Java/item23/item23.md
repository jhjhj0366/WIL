## 태그 달린 클래스보다는 클래스 계층 구조를 활용하라 

### 태그 달린 클래스
두 가 지 이상의 의미를 표한하고, 그 중 현재 표현하는 의미를 태그 값으로 알려주는 클래스를 포함하게 된다면 단점이 따라오게 된다.

#### 태그 달린 클래스의 단점
1. 여러 구현이된 클래스에 혼합돼 있어 가독성이 나쁘다.
	- 또한 각 타입마다 태그를 선언해줘야 하기 떄문에 열거 타입 , 태그 필드, 조건 분기문  등 쓸데 없는 코드가 많아진다.
2. 메모리 효율이 나쁘다.
3. 컴파일러에서 문제를 발견할 수 없다.
4. 다른 의미를 추가하려면 코드를 수정해야 한다.
5. 인스턴스 타입만으로 현재 나타내려는 의미를 알 수 없다.

```ad-note
즉, 태그 달린 클래스는 장황하고 오류를 내기 쉽고 비효율적이다.
```

#### 해결 방안
자바와 같은 객체 지향 언어는 타입 하나로 다양한 의미의 객체를 표현할 수 있는 서브타이핑을 제공한다.

```ad-note
서브타이핑을 이용하면 클래스 계층구조를 활용할 수 있다.
```

### 클래스 계층 구조
태그 달린 클래스를 계층구조로 변경하는 방법은 계층 구조의 루트가 될 추상 클래스를 정의하고, 태그 값에 따라 동작이 달라지는 메서드들을 루트 클래스의 추상 메서드로 선언한다. 마지막으로 태그에 상관없이 동장이 일정한 메서드들을 루트 클래스를 구현한 일반 클래스로 선언한다.

#### 클래스 계층 구조 장점
1. 태그마다 다른 인자들을 분리해 전부 활용할 수 있어 메모리를 효율적으로 사용한다.
2. final 키워드를 붙여 방어적인 코드를 구현할 수 있다.
3. 타입 의미별로 따로 존재하니 변수의 의미를 명시하거나 변수의 의미를 명시하거나 제한할 수 있고, 특정 의미만 매개변수로 받을 수 있다.
4. 컴파일러에서 해당 인스턴스가 어떤 목적으로 생성이 되는지 파악할 수 있다.
5. 컴파일 타임에서 타입 검사 능력을 높여줘 컴파일 오류를 쉽게 확인할 수 있다.
6. 조건 분기문에서 발생할 수 있는 쉬운 오류를 방지할 수 있다.
7. 다른 프로그래머들이 독립적으로 계층 구조를 확장하고 함께 사용할 수 있다.

### 핵심 정리
태그 달린 클래스를 써야 하는 상황은 거의 없다. 새로운 클래스를 작성하는 데 태그 필드가 등장한다면 태그를 없애고 계층구조로 대체하는 걸 고려하고 기존 클래스가 태그 필드를 사용한다면 계층 구조로 리팩토링하는 걸 고려하자.

```ad-question
태그 달린 클래스를 써야하는 상황은 어떤 상황일까?
```

```ad-note
이전 자바 플레이그라운드 미션을 진행하면서 점과 선, 도형들을 구현하고 각 상황에서 길이나 넓이를 구했던 적이 있다. 미션을 진행하면서 공통 로직은 루트 클래스로 구현하고 의미마다 다른 기능이나 인자는 일반 클래스에서 구현했었는데, 이 방식이 서브타이핑 방식인지도 모르고 구현했던 적이 있다. 이렇게 장점을 정확하게 알고, 구현하는 프로세스를 익힌다면 코딩 시간을 단축할 수 있고, 더 유연하게 구현할 수 있다.
```
