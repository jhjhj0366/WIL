# 프로세스 스케줄링 큐

### 스케줄링 큐

### 준비 큐

프로세서를 할당 받아 실행하려고 기다리는 프로세스들이 기다리는 큐이다.

**입출력장치 큐**

입출력장치를 사용하려는 프로세스들이 대기하는 큐이다.

**스케줄링 큐 동작**

1. 준비 큐에서 프로세스 하나를 선택해 CPU를 할당한다.
2. 수행하다 입출력 장치를 사용하게 되면 해당 프로세스는 레디 큐(입출력장치 큐)로 보내진다. 
    
    > 💡 사용하려는 장치마다 레디 큐를 구성하고 있다.
    
3. 입출력장치 큐에서 기다리다 CPU 프로세스가 할당되어 입출력장치를 사용하게 된다.
4. 모든 처리가 끝나면 다시 준비큐로 보내져 남은 작업을 처리한다.

> 💡 준비 큐는 프로세스들의 PCB 정보가 링크드 리스트의 형태로 구성되어 있어 FIFO 방식으로 구성되어 있다.

### 입출력장치 큐

각 장치마다 레디 큐를 가지고 있다. 각 장치마다 스케줄링 알고리즘이 설정되어 있다.

### 프로세스 스케줄링 큐잉 도표

프로세스 스케줄링 큐잉 도표는 프로세스 스케줄링을 표현하는 방법이다.

**할당 시간 초과**

할당 시간이 초과되는 것은 인터럽트의 일종이다.

**인터럽트**

인터럽트란 비동기적인 사건이 발생하는 것을 의미한다. 

인터럽트 서비스 루틴을 우선 수행하기 때문에 현재 수행중이던 프로세스가 러닝 상태에서 제거되어지면 인터럽트가 끝마칠 때 재개될 수 있도록 준비 큐에 다시 보내진다.

**자식 생성**

자식 생성 같은 경우 오래 걸릴 수 있으니 자식 생성될 때까지 대기하고 있다가 생성이 되면 다시 레디 큐에 보내진다.

### 스케줄러 종류의 역할

스케줄러는 어느 순간에 스케줄링 하느냐에 따라 크게 두 가지로 나눌 수 있다.

**장기 스케줄러(잡 스케줄러)**

실행을 하기 위해 주기억장치로 각각의 프로세스들을 탑재해는 기능을 담당한다.

**단기 스케줄러(CPU 스케줄러)**

레디 큐에 들어있는 프로세스들 중 하나를 선택하고 CPU를 할당해 실행 상태로 만드는 기능을 담당한다.

### **각 스케줄러의 실행 빈도**

**단기 스케줄러는 매우 자주 호출된다.**

단기 스케줄러는 CPU에 프로세스들을 매핑해주고 모든 프로세스들을 공정성 있게 할당하기 위해 변경한다. 그렇기 때문에 자주 호출된다.(시분할 시스템에 의해서 진행된다.)

**장기 스케줄러는 단기 스케줄러보다 호출되는 빈도수가 적다**

시분할 시스템에는 필요하지 않은 부분이고 일괄 처리 배치 시스템에서만 사용된다. 일괄 처리 시스템에서 다중 프로그래밍 정도를 제어한다.

### 프로세스 특징에 따른 장기 스케줄링

**입출력 중심 프로세스(I/O-bound Process)**

- CPU 연산보다 I/O 수행에 더 많은 시간 소모할 경우 적합하다.
- CPU를 짧은 시간 동안 사용할 경우 적합하다.

**CPU 중심  프로세스(CPU-bound Process)**

- I/O 수행보다 CPU 연산에 더 많은 시간 소모되는 경우 적합하다.
- CPU를 오랫동안 사용해야 할 때 적합하다.

> 💡 장기 스케줄러는 위 프로세스들을 적절히 혼합하여 선택해야 효율적이다.

### 프로세스 특징에 따른 중기 스케줄러

시분할 시스템의 주기억장치에서 프로세스들을 임시로 제거해 다중 프로그래밍 정도를 완화시키거나 프로세스들의 혼합성을 개선하기 위해 사용된다. 이 방식을 스와핑이라 부른다.

많은 프로그램들을 동시에 수행하는 등 현재 주 기억 장치에서 프로세스들을 임시로 보조 기억 장치의 특정 영역으로 뺴내서 메모리에 탑재된 프로세스의 수를 줄여주는 방법이다.

> 💡 메모리에서 빠지는 스왑 아웃이 발생한 후 다시 실행하기 위해 스왑 인이 발생하면 준비 상태의 프로세스가 된다.

### 프로세스 특징에 따른 단기 스케줄러

선택한 프로세스에 실질적으로 프로세서를 할당하는 것이다. 프로세스의 레지스터를 적재(Context Switching)이라 하고, 사용자 상태(User Mode)로 전환한다. 해당 동작은 디스패처(Dispatcher)가 진행한다.

### 스케줄링과 프로세스 상태 변환

### 선점형 VS 비선점형

**비선점형**

- 프로세스가 스스로 CPU를 반납하는 경우이기 때문에 비 강제적이다.

**선점형**

- 강제적으로 CPU 활당을 받납 받는다.
- 공유 자료에 대한 접근 조정이 필요하다.
- 컨텍스트 전환 전에 시스템 호출 처리를 완료하거나 IO  요청을 blocking 한다.
    - 이런 특징이 실시간 컴퓨팅이나 멀티 프로세스 지원에 악영향을 끼친다.

### CPU 스케줄링 알고리즘 비교 기준

- CPU 이용률은 높게
- 처리율을 높게
- 총 처리 시간을 낮게
- 대기 사긴을 낮게
- 응답 시간을 낮게